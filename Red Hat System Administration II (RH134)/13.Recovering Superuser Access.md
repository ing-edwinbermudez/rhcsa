# Regaining Superuser Access and Resetting the Root Password

## Resetting the root Password from the Boot Loader

One task that every system administrator should be able to accomplish is resetting a `root` user's lost password. This task is trivial if the administrator is still logged in, either as the `root` user or as an unprivileged user with full Sudo access. However, this task is a little more complex when the administrator is not logged in because it requires rebooting the system into a special state known as a rescue environment or rescue mode.

In Red Hat Enterprise Linux 10, you can enter rescue mode to change a forgotten root password by using one of two methods:

- With rescue media (recommended)
- Without rescue media

### With Rescue Media

The recommended approach is to use rescue media, which enables you to boot a small Red Hat Enterprise Linux environment from installation media, such as a CD-ROM or an ISO file, instead of from the system's hard drive.

To boot into rescue mode, you must be able to use one of the following installation media devices or files to boot the system:

- For a physical machine, use installation media such an a CD-ROM or a USB flash device.
- For a virtual machine, use ISO files.

When using rescue media, be sure that the image is the same as the system. For example, for a RHEL 10 system, you must use a RHEL 10 image.

As part of the network installation media, Red Hat provides a minimum installation image: Red Hat Enterprise Linux 10.0 Boot ISO. You can use this boot ISO image as rescue media to reboot the system and reset the root password.

To use this image as rescue media, follow these steps:

1. Reboot the system.
2. During the system reboot, select the boot.iso image to boot from. The process to select alternate media to boot from varies based on your environment.
3. From the GRUB2 menu, go to Troubleshooting â†’ Rescue a Red Hat Enterprise Linux system.

![alt text](images/image11.png)


![alt text](images/image13.png)


4. In the rescue environment menu, select Continue by pressing 1 and then press Enter to mount the system normally.


![alt text](images/image13.png)

5. At the shell prompt, change the root directory to the /mnt/sysroot directory.

```bash
chroot /mnt/sysroot
```

6. Change the root password to the desired password.

```bash
passwd root
```

7. Ensure that all unlabeled files, including the `/etc/shadow` file at this point, is relabeled during boot.

```bash
touch /.autorelabel
```

8. Type the exit command twice to reboot your system. The first command exits the  `chroot` command, and the second command exits rescue mode and reboots the system.

```bash
exit
exit
```

At this point, the system continues booting, performs a full SELinux relabeling, and then reboots again.


### Without Rescue Media

As an alternative to using rescue media, you can also access the rescue environment by configuring the system to emulate rescue mode. To achieve this system state, pass the init `/bin/bash` option to the kernel, and then remount the `root` file-system in read/write mode.

<div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Warning:</b><br><br>
This method is risky and must be performed with caution.<br><br>
</div>


1. Reboot the system.
2. Interrupt the boot-loader countdown by pressing Esc.
3. Boot with the `init=/bin/bash` argument.

    a. In the GRUB2 menu, move the cursor to the kernel entry to boot.
    
    b. Press `E` to edit the selected entry.

    c. Move the cursor to the kernel command line (the line that starts with the linux text).

    d. Remove any `console=` options from the line.

    e. Move to the end of the line by pressing `Ctrl+E`.

    f. Add the string  `init=/bin/bash` to the end after space.

    g. Press `Ctrl+X` to boot with the changes.

4. Wait for the system to finish booting. 

5. The `root` (/) file system is mounted as read-only. Changing the root password requires the root file system to be mounted as `read/write`. Remount the root file system in `read/write` mode:

```bash
mount -o remount,rw /
```

6. Set a new `root` password

```bash
passwd
```

7. Create the hidden `.autorelabel` file to relabel the SELinux context in all files at the next system boot.

```bash
touch /.autorelabel
```

8. Reboot the system.

```bash
exec /sbin/init
```
