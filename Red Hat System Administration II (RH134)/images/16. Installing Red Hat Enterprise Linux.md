# Installing Red Hat Enterprise Linux Interactively
---

## Installation Media

Red Hat provides different forms of installation media that you can download from the Customer Portal website by using your active subscription.

- A binary image file in ISO 9660 format that contains the Anaconda Red Hat Enterprise Linux installation program, and the BaseOS and AppStream package repositories. These repositories contain the necessary packages to complete the installation without additional repositories.

- A smaller boot ISO image file that contains only the Anaconda installer, and which requires network access during installation to download packages from online repositories that are hosted by HTTP, FTP, or NFS servers.

- Source code (human-readable programming language instructions) for Red Hat Enterprise Linux. The source DVDs have no documentation. This image helps to compile or develop your software according to the Red Hat Enterprise Linux version. The availability of the operating system source code offers transparency and helps developers to build their own software by using Red Hat Enterprise Linux as a foundation.

Red Hat Enterprise Linux 10 supports the following architectures:

- AMD and Intel 64-bit architectures (x86-64-v3)
- The 64-bit ARM architecture (ARMv8.0-A)
- IBM Power Systems, Little Endian (POWER9)
- 64-bit IBM Z (z14)

After downloading your preferred image, create bootable installation media by following the instructions in the Interactively Installing RHEL from Installation Media guide.

https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10/html-single/interactively_installing_rhel_from_installation_media/index

For example, to install RHEL on a bare-metal server, you could copy one of the ISO images to a USB drive and boot from that.

### Build Customized Images with RHEL Image Builder

Red Hat Enterprise Linux image builder helps to create customized images of Red Hat Enterprise Linux. RHEL image builder enables administrators to build custom system images for deployment on cloud platforms or on virtual environments for specialized use cases.

Use the `composer-cli` command or the Red Hat web console interface to access RHEL image builder.

### Disk and Memory Requirements

To install Red Hat Enterprise Linux 10, you must have a minimum of 10 GiB of space on the partition where RHEL will be installed.

The minimum RAM requirement depends on the installation type:

| Installation type                        | Recommended minimum RAM size                                      |
|------------------------------------------|-------------------------------------------------------------------|
| **Local media installation (USB, DVD)**  | 1.5 GiB for x86–64–v3, ARMv8.0–A, and z14 architectures<br>3 GiB for POWER9 architecture |
| **NFS network installation**              | 1.5 GiB for x86–64–v3, ARMv8.0–A, and z14 architectures<br>3 GiB for POWER9 architecture |
| **HTTP, HTTPS, or FTP network installation** | 3 GiB for x86–64–v3 and z14 architectures<br>4 GiB for ARMv8.0–A and POWER9 architecture |

## Install Red Hat Enterprise Linux Manually

By using the binary DVD or boot ISO, administrators install a new RHEL system on a bare-metal server or on a virtual machine. The Anaconda program supports two installation methods: manual and automated.

- The manual installation interacts with the user to query how Anaconda installs and configures the system.
- The automated installation uses a Kickstart file to direct Anaconda how to install the system.

## Install RHEL by Using the Graphical Interface

Anaconda starts as a graphical application when you boot the system from the binary DVD or from the boot ISO.

At the **WELCOME TO RED HAT ENTERPRISE LINUX 10** screen, select the language, and click **Continue**. Individual users can choose a preferred language after installation.

Anaconda presents the **INSTALLATION SUMMARY** window, the central interface to customize parameters before beginning the installation.

![alt text](images/image19.png)

From this window, configure the installation parameters by selecting the icons in any order. Select an item to view or to edit. In any item, click **Done** to return to this main screen.

Anaconda marks mandatory items with a triangle warning symbol and message. The orange status bar at the bottom of the screen reminds you to complete the required information before the installation begins.

Complete the following items as needed:

**Keyboard**
Add keyboard layouts.

**Language Support**
Select additional languages to install.

**Time & Date**
Select the system's location by selecting the location from a list. Specify the local time zone even when using Network Time Protocol (NTP). Alternatively, you can leave NTP disabled and set the time and date manually.

**Connect to Red Hat**
Register the system with your Red Hat account and select the system purpose. The system purpose feature enables the registration process to automatically attach the most appropriate subscription to the system. You must first connect to the network by using the **Network & Host Name** icon to register the system. Unless you remove the corresponding checkmark, the system might also be enrolled in Red Hat Insights by default.

**Installation Source**
Provide the source package location that Anaconda requires for installation. The **Installation Source** field already refers to the DVD when using the binary DVD.

**Software Selection**
Select the base environment to install, and include any additional software. The Minimal Install environment installs only the essential packages to run Red Hat Enterprise Linux.

**Installation Destination**
You must select at least one disk that has enough space to install Red Hat Enterprise Linux. To complete this task quickly, the administrator can rely on automatic storage configuration, which uses Logical Volume Management by default. Custom configuration is also available to help advanced users to create complex storage layouts. Note that even in custom mode, Anaconda enables you to automatically create partitions or volumes. Letting the installer determine the size is recommended because the installer considers the overall disk and RAM size.

The default radio button for automatic partitioning allocates the selected storage devices by using all available space.

**KDUMP**
The `kdump` kernel crash dump feature collects information about the state of the system memory when the kernel crashes. Red Hat engineers analyze a kdump file to identify the cause of a crash. Use this Anaconda item to enable or to disable kdump

**Network & Host Name**
Detected network connections are listed on the left. Select a connection to display its details. By default, Anaconda activates the network automatically.

**Root Account**
Starting in Red Hat Enterprise Linux 10, the root account is disabled by default. To enable it, select the Enable root account option and then set your root password.


<div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Note:</b><br><br>
By default, SSH access by the root account does not allow password-based authentication. However, password-based authentication can be allowed in Anaconda.<br><br>
</div>

**User Creation**

If the `root` account is disabled by default, then creating a non-root account with administrative privileges is mandatory. The non-root account with administrative privileges can use the `sudo` command to run commands as the `root` account. The non-root account with administrative privileges is added to the wheel group.

Creating a local, non-root user account is a recommended practice but is optional unless the `root` account is locked. You can also create accounts after the installation is complete if the `root` account is not disabled.

After you complete the installation configuration, resolve all warnings and click **Begin Installation**. Clicking **Quit** halts the installation without applying any changes to the system.

When the installation finishes, click **Reboot**. Anaconda displays the **Initial Setup** screen when you log in to a graphical desktop for the first time. Accept the license information and optionally register the system with the subscription manager. You might skip system registration until later.

## Install RHEL by Using Remote Desktop Protocol (RDP)

In Red Hat Enterprise Linux 10, the installer provides the option to use Remote Desktop Protocol (RDP) to control the installation. An RDP client application is required to interact remotely with the Anaconda installer, which has performance benefits compared to the now deprecated VNC mode.

To start the installation in RDP mode, you must provide the inst.rdp option on the kernel command line in the `boot-loader` stage. Starting the RDP service requires authentication, which you can provide by using the `inst.rdp.username` and `inst.rdp.password` arguments on the command line. If no authentication details are provided on the command line, then Anaconda interactively prompts for an RDP username and password before starting the RDP service.

![alt text](images/image20.png)

When the installer successfully starts in RDP mode, it displays the IP address that the RDP client uses to start the installation. Although the network port for incoming client connections is not shown, the installer uses the default 5900 (TCP) RDP port. Multiple RDP clients can connect to the service for collaboration.

## Troubleshoot the Installation

During a Red Hat Enterprise Linux 10 installation, Anaconda provides two virtual consoles. The first virtual console is text-based and runs the `tmux` terminal multiplexer to provide six separate windows that show useful information. You can access that console by pressing `Ctrl+Alt+F1`. The second virtual console, which is displayed by default, shows the Anaconda graphical interface. You can access it by pressing `Ctrl+Alt+F6`.

The `tmux` terminal provides a shell prompt in the second window in the first virtual console. You can use the terminal to enter commands to inspect and troubleshoot the system while the installation continues. The other windows provide diagnostic messages, logs, and additional information.

The following table lists the keystroke combinations to access the virtual consoles and the `tmux` terminal windows. In the `tmux` terminal, the keyboard shortcuts are performed in two actions: press and release `Ctrl+B`, and then press the number key of the window to access. In the `tmux` terminal, you can also press `Alt+Tab` to rotate the current focus between the windows.

| Key sequence | Content |
|---------------|----------|
| **Ctrl+Alt+F1** | Access the tmux terminal multiplexer. |
| **Ctrl+Alt+F6** | Access the Anaconda graphical interface. |
| **Ctrl+B 1** | In the tmux terminal, access the main information page for the installation process. |
| **Ctrl+B 2** | In the tmux terminal, provide a root shell. Anaconda stores the installation log files in the `/tmp` directory. |
| **Ctrl+B 3** | In the tmux terminal, display the contents of the `/tmp/anaconda.log` file. |
| **Ctrl+B 4** | In the tmux terminal, display the contents of the `/tmp/storage.log` file. |
| **Ctrl+B 5** | In the tmux terminal, display the contents of the `/tmp/program.log` file. |
| **Ctrl+B 6** | In the tmux terminal, display the contents of the `/tmp/packaging.log` file. |


<div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Note:</b><br><br>
For compatibility with earlier Red Hat Enterprise Linux versions, the virtual consoles from Ctrl+Alt+F2 through Ctrl+Alt+F5 also present root shells during installation.<br><br>
</div>

---
# Automating Red Hat Enterprise Linux Installation with Kickstart
---

## Introduction to Kickstart

The Kickstart feature of Red Hat Enterprise Linux automates a system installation that would typically require user interaction. You can use a single text file to provide answers to common installation questions, such as disk configuration, network settings, package selection, and users to create. The Kickstart feature is similar to an answer file that is used for an unattended installation of Microsoft Windows.

A Kickstart file begins with the command section, which defines several aspects of how to install the target system. The installer ignores comment lines, which start with the number sign (#). In addition to commands, you can also provide additional sections. Each of these sections must begin with a specific directive that starts with the percent sign (%). The %end directive marks the end of each section.

The %packages section specifies the software to include for installation. You can provide a detailed list of individual packages by name, without versions. The installer resolves any dependencies that the packages require. You can also use wildcards to match multiple packages. You can also define larger sets of packages in the form of groups or environments. The at sign (@) denotes package groups (either by group or ID), and the character combination of the at sign followed by a caret (@^) denotes environment groups (groups of package groups).

```bash
%packages
@^graphical-server-environment
vim*
%end
```

Groups have mandatory, default, and optional components. Typically, Kickstart installs mandatory and default components. To exclude a package or a package group from the installation, precede it with a hyphen (-). Excluded packages or package groups might still install if they are mandatory dependencies of other requested packages.

A Kickstart configuration file can include a %pre and a %post section to run automated scripts that further configure the system. Scripts can use any available interpreter on the system, including Bash or Python.

The %pre scripts execute before any disk partitioning is done. Typically, you use %pre scripts to initialize a storage or network device that the remainder of the installation requires. The %post scripts execute after the initial installation is complete.

Anaconda executes the preinstallation scripts outside the chroot environment that contains the file system of the target system. As a result, fewer commands might be available compared to postinstallation scripts, which run in the chroot environment and have access to all the tools on the newly installed system.

Administrators often use %post scripts to automate common changes during Kickstart. However, be aware that copying scripts or RPM packages from the installation media does not work in the chroot environment that is used in the final phase of the installation. Therefore, such tasks must be done in a %pre script.

Lastly, you can specify as many sections as you need, in any order. For example, you can have two %post sections, and they are interpreted in order of appearance.

## Installation Commands

The following Kickstart commands configure the installation source and method.The following Kickstart commands configure the installation source and method.

**url**

Specifies the URL that points to the installation media that is hosted on a remote HTTP or FTP server.

```bash
url --url="http://classroom.example.com/rhel10.0/x86_64/dvd/"
```

**repo**

Specifies where to find additional packages for installation. This option must point to a valid DNF repository.

```bash
repo --name="appstream" --baseurl=http://classroom.example.com/rhel10.0/x86_64/dvd/AppStream/
```

**text**

Forces a text mode installation.

## Device and Partitioning Commands

The following Kickstart commands configure devices and partitioning schemes.

**clearpart**

Removes partitions from the system before creating partitions.

```bash
clearpart --all --drives=vda,vdb
```

**part**

Specifies the size, format, and name of a partition. Required unless the autopart or mount commands are preqsent.

```bash
part /home --fstype=xfs --label=homes --size=4096 --maxsize=8192 --grow
```

**autopart**

Automatically creates a root partition, a swap partition, and an appropriate boot partition for the architecture. On large enough drives (50 GB+), this command also creates a `/home` partition.

**ignoredisk**

Prevents Anaconda from modifying disks, and is useful alongside the autopart command.

```bash
ignoredisk --drives=sdc
```

**bootloader**

Defines where to install the boot loader. Required.

```bash
bootloader --location=mbr --boot-drive=sda
```

**volgroup, logvol**

Create LVM volume groups and logical volumes.

```bash
part pv.01 --size=8192
volgroup myvg pv.01
logvol / --vgname=myvg --fstype=xfs --size=2048 --name=rootvol --grow
logvol /var --vgname=myvg --fstype=xfs --size=4096 --name=varvol
```

**zerombr**

Initialize disks whose formatting is unrecognized.


## Network Commands

The following Kickstart commands configure security, language, and region settings.

**lang**

Sets the language to use on the installed system. Required.

```bash
lang en_US
```

**keyboard**

Sets the system keyboard type. Required.

```bash
keyboard --vckeymap=us
```

**timezone**

Defines the time zone and whether the hardware clock uses UTC. Required.

```bash
timezone --utc Europe/Amsterdam
```

**timesource**

Enables or disables NTP. If you enable NTP, then you must specify NTP servers or pools. Optional.

```bash
timesource --ntp-server classroom.example.com
```

***authselect**

Sets up authentication options. Options that the authselect command recognizes are valid for this command. Refer to the authselect(8) man page. Optional.

**rootpw**

Defines the initial root user password. Starting in RHEL 10, this command is optional, because the root account is disabled by default.

``bash
rootpw --lock
rootpw --plaintext redhat
rootpw --iscrypted $6$KUnFfrTzO8jv.PiH$YlBbOtXBkWzoMuRfb0.SpbQ....XDR1UuchoMG1
```

**selinux**

Sets the SELinux mode for the installed system.

```bash
selinux --enforcing
```

**services**

Modifies the default set of services to run under the default systemd target.

```bash
services --disabled=rsyslog --enabled=NetworkManager,firewalld
```

**group, user**

Creates a local group or user on the system.

```bash
group --name=admins --gid=10001
user --name=jdoe --gecos="John Doe" --groups=admins
```

div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Note:</b><br><br>
In RHEL 10, make sure to create a user that belongs to the wheel administrative group if you decide to keep the root account locked.<br><br>
</div>

## Miscellaneous Commands

The following Kickstart commands configure logging the host power state on completion.

**logging**

This command defines how Anaconda handles logging during the installation. Optional.

```bash
logging --host=loghost.example.com
```

**firstboot**

Controls whether the GNOME Initial Setup application should start the first time that the system boots. This command requires the `initial-setup` package.

```bash
firstboot --disabled
```

**reboot, poweroff, halt**

Specify the final action when the installation completes. The default setting is the `halt` option, which waits for the user to press a key before rebooting.

div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Note:</b><br><br>
There are many more Kickstart commands available. Commands might also support complex options that are hard to remember without consulting references. For more information, refer to Kickstart Commands and Options Reference.<br><br>
</div>

## Example Kickstart File

In the following example, the command section of the Kickstart file is followed by package selection, an add-on section to configure the kdump feature of the Linux kernel, and a postinstallation script.

```bash
# version=RHEL10

# Installation mode
graphical

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'

# System language
lang en_US.UTF-8

# System timezone
timezone America/New_York --utc

# Network information
network  --bootproto=dhcp --device=enp1s0 --ipv6=auto --activate
network  --hostname=serverb.lab.example.com

# Use network installation
url --url="http://content.example.com/rhel10.0/x86_64/dvd/"

# Storage commands
zerombr
clearpart --all --initlabel
autopart
ignoredisk --only-use=vda

# Root password
rootpw --iscrypted --allow-ssh $y$j9T$jfY1BtZko.0LZxZLBCGeb7vM$7agy5.gxAgxgk9lGXCak1DPOVb1j7uf8HPb7vWXc46B
user --groups=wheel --name=student --password=$y$j9T$EQF0SpVuDKgpRnc2gmxnUnGV$6BqUu.HhnduZszglv6t1Vy6ptF8GQeQkk8maJXWM/y5 --iscrypted --gecos="student"

%packages
@^minimal-environment
vim-enhanced
-hyperv*
%end

# Configure the kernel crash dumping mechanism
%addon com_redhat_kdump --enable --reserve-mb='auto'
%end

%post
echo "This system was deployed using Kickstart on $(date)" > /etc/motd
%end
```

div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Note:</b><br><br>
In a Kickstart file, missing required values cause the installer to interactively prompt for an answer or to stop the installation entirely<br><br>
</div>

## Kickstart Installation Workflow

Use the following steps to automate the installation of Red Hat Enterprise Linux with the Kickstart feature:

1. Create a Kickstart file.
2. Publish the Kickstart file on removable media or a network server so that the Anaconda installer can access it.
3. Boot the Anaconda installer and point it to the Kickstart file.

## Create a Kickstart File

You can use either of these methods to create a Kickstart file:

- Use the Kickstart Generator website.
- Use a text editor to create your own version.

The Kickstart Generator site at https://access.redhat.com/labs/kickstartconfig presents dialog boxes for user inputs, and creates a Kickstart configuration file based on the user's choices. Each dialog box corresponds to the configurable items in the Anaconda installer.

![alt text](images/image21.png)


Creating a Kickstart file from scratch can be complex, so the recommended practice is to start with updating an existing sample file. Every installation creates a `/root/anaconda-ks.cfg` file that captures the Anaconda configuration that was used during the installation of the host system. This file is a good starting point to create a Kickstart file.

The `ksvalidator` utility checks for syntax errors in a Kickstart file. It ensures that keywords and options are correctly used, but it does not validate URL paths, individual packages, groups, nor any part of %post or %pre scripts. For example, if the `firewall --disabled` directive is misspelled, then the ksvalidator command might produce one of the following errors:


```bash
ksvalidator /tmp/anaconda-ks.cfg
```

The `ksverdiff` utility displays syntax differences between different operating system versions. For example, the following command displays the Kickstart syntax changes between RHEL 8 and RHEL 9:

```bash
ksverdiff -f RHEL9 -t RHEL10
```

The `pykickstart` package provides the `ksvalidator` and `ksverdiff` utilities.

## Publish the Kickstart File

The Kickstart file must be made available for the Anaconda installer to access it. The following list describes several options for storing the file:

- A network server that is available during installation by using the FTP, HTTP, or NFS protocols.
- A removable USB disk or CD-ROM.
- A local hard disk on the system.

The installer must access the Kickstart file to begin an automated installation. In enterprise environments, the file is usually made available via an FTP, HTTP, or NFS server.

A Kickstart file can also be published on removable media. A USB drive might be more convenient than burning the file to optical media such as a CD-ROM or DVD disc.

For a quick rebuild of a single system, you might choose to provide the Kickstart file on one of the local drives.

## Start the Installer and Point to the Kickstart File

When you boot the target system by using the installation media, you must inform the Anaconda installer where to locate the Kickstart file by passing the inst.ks=LOCATION parameter to the kernel.

Consider the following examples to specify the correct location of your published Kickstart file:

- inst.ks=http://server/dir/file
- inst.ks=ftp://server/dir/file
- inst.ks=nfs:server:/dir/file
- inst.ks=hd:device:/dir/file
- inst.ks=cdrom:device

The appropriate `inst.ks` argument can be added in the boot-loader stage. From the installation menu, select the Install menu item, and press C to edit the kernel arguments.

![alt text](images/image22.png)

Append the inst.ks= argument without changing anything else. Press Ctrl+X to start the boot process.

![alt text](images/image23.png)

After specifying the Kickstart file location, the Anaconda installer will start. If the referenced Kickstart file includes all the required commands, then Anaconda does not prompt for further input.

During installation, you still have the option to use the standard Anaconda-related keyboard shortcuts from Ctrl+Alt+F1 to Ctrl+Alt+F6 to switch between screens and to get a root shell to issue troubleshooting commands. Using the shell directly to look at log files and issue commands is an invaluable resource to troubleshoot installation issues or failures. For example, incorrect syntax in Kickstart files or storage configuration that cannot be accomplished by using the available hard drives can cause the installation to fail. The installer also reports errors caused by malformed postinstallation scripts.

After the installation process has finished successfully, you might have to press Reboot to continue unless the Kickstart file specified the reboot command.