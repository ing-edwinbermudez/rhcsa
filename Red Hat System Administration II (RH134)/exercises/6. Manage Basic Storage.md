# Lab Manage Basic Storage

✅ **Task 1:**

The `serverb` machine has several unused disks. Use the `parted` command to create a GPT partition named `backup` with the size of 2 GB on the `/dev/sdb` disk.

Because the parted command requires the use of offsets, a size between 1.8 GB and 2.2 GB is acceptable.

Label the backup partition with the XFS file-system type.

```bash
ssh student@serverb
sudo -i
lsblk --fs

parted /dev/sdb mklabel gpt
parted /dev/sdb mkpart backup xfs 2048s 2GB
parted /dev/sdb print
udevadm settle
```

✅ **Task 2:**

Format the backup partition with an XFS file system, and persistently mount the file system on the /backup directory by using the partition UUID.

```bash
mkfs.xfs /dev/sdb1
mkdir /backup
lsblk -fs /dev/sdb1
echo "UUID=00347b4e-a968-4e44-933a-b445adefbbfd /backup xfs defaults 0 0" >> /etc/fstab
systemctl daemon-reload
mount /backup
mount | grep backup
```

✅ **Task 3:**

On the `/dev/sdb` disk, create two partitions named `swap1` and `swap2`, both with the size of 512 MB. For both partitions, configure the file-system type to host swap spaces.

A size between `460 MB` and `564 MB` is acceptable.

```bash
lsblk --fs /dev/sdb
parted /dev/sdb mkpart swap1 linux-swap 2000M 2512M
parted /dev/sdb mkpart swap2 linux-swap 2512M 3024M
parted /dev/sdb print
udevadm settle
```

✅ **Task 4:**

Initialize the `swap1` and `swap2` swap spaces, and configure them to activate at boot. Set the priority order so that the `swap2` partition is preferred over the `swap1` partition.

```bash
mkswap /dev/sdb2
mkswap /dev/sdb3

echo "UUID=2e7b9535-e8ae-4d65-bded-1c67c5c5324a swap swap pri=10 0 0" >> /etc/fstab
echo "UUID=0f9ca3f8-4dd3-49d8-be66-656fcec7ef13 swap swap pri=20 0 0" >> /etc/fstab
cat /etc/fstab

systemctl daemon-reload
swapon -a
swapon --show
```

✅ **Task 5:**

Reboot the `serverb` machine. Confirm that the system automatically mounts the backup partition to the `/backup` directory. Additionally, confirm that the system activates the `swap1` and `swap2` swap spaces.

```bash
systemctl reboot
ssh student@serverb
mount | grep /backup
swapon --show
```