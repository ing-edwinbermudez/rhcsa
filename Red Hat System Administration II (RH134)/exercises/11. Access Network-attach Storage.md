# Lab: Access Network-attached Storage
---

✅ **Task 1:**

On the `servera` machine, install the `autofs` package.

```bash
ssh student@servera
sudo -i
dnf install autofs -y
```

✅ **Task 2:**

On the `servera` machine, manually mount the `serverb:/shares` NFS export on the `/mnt` directory. This task helps you verify that exports are configured with the correct access and permissions. Unmount the `/mnt` directory.

```bash
mount -t nfs serverb:/shares /mnt
# mount -t nfs -o rw,sync serverb:/shares /mnt
ls -l /mnt
umount /mnt
```

✅ **Task 3:**

On the `servera` machine, create an automounter indirect map to mount NFS exports along with all the subdirectories in the `/remote` directory.

Use the `/etc/auto.master.d/shares.autofs` file for the master map and the `/etc/auto.shares` file for the mapping file. Synchronously mount the `serverb:/shares/&` NFS export in the read/write mode.

Start the autofs service and configure it to start automatically.

```bash
echo "/remote /etc/auto.shares" >> /etc/auto.master.d/shares.autofs
cat /etc/auto.master.d/shares.autofs

echo "* -rw,sync,fstype=nfs4 serverb:/shares/&" >> /etc/auto.shares
cat /etc/auto.shares

systemctl enable --now autofs
mount | grep nfs
```
