# Creating and Managing File Systems on Standard Partitions
---

## Disk Partitioning

Disk partitioning divides a hard drive into multiple logical storage partitions. You can use partitions to divide storage based on different requirements, and this division provides many benefits:

- Limit available space to applications or users.
- Separate operating system and program files from user files.
- Create a separate area for memory swapping.
- Limit disk space use to improve the performance of diagnostic tools and backup imaging.

On x86 systems, the two primary partitioning schemes are Master Boot Record (MBR) and GUID Partition Table (GPT).

### Master Boot Record (MBR) Partition Scheme

The Master Boot Record (MBR) partitioning scheme is the standard on systems that run Basic Input/Output System (BIOS) firmware. This scheme supports a maximum of four primary partitions. On Linux systems, with extended and logical partitions, you can create up to 15 partitions. With a 32-bit partition size, disks that are partitioned with MBR can have a size of up to 2 TiB.

![alt text](images/image7.png)

MBR partitioning of the `/dev/sdb` storage device

The 2 TiB disk and partition size limit is now a common and restrictive limitation. Consequently, the legacy MBR scheme is superseded by the GUID Partition Table (GPT) partitioning scheme.

### GUID Partition Table (GPT) Partition Scheme

For systems that run Unified Extensible Firmware Interface (UEFI) firmware, the GUID Partition Scheme (GPT) is the standard for disk partitioning, and addresses the limitations of the MBR scheme. The GPT scheme provides a maximum of 128 partitions. The GPT scheme allocates 64 bits for logical block addresses to support partitions and disks of up to eight zebibytes (ZiB) or eight billion tebibytes (TiB).

## Managing Partitions

An administrator can use a partition editor program to change a disk's partitions, such as by creating and deleting partitions, and changing partition types.

Red Hat Enterprise Linux provides the `parted` command as the standard command-line partition editor. You can use the parted partition editor with storage that uses either the MBR partitioning scheme or the GPT partitioning scheme.

The `parted` command takes as its first argument the device name that represents the entire storage device or disk to modify, followed by subcommands.

The following example uses the print subcommand to display the partition table on the disk that is the `/dev/sda` block device (the first QEMU disk that the system detects):

```bash
parted /dev/sda print
```

To start an interactive session, execute the `parted` command as 
the `root` user and specify the disk device name as an argument:

```bash
parted /dev/sda
```

Use the `print` subcommand to display the partition table:

```bash
print
```

To exit the interactive partitioning session, use the quit command:

```bash
quit
```


By default, the parted command displays sizes in powers of 10 (KB, MB, GB). You can change the unit size with the unit parameter, which accepts the following values:

- s for sector
- B for byte
- MiB, GiB, or TiB (powers of 2)
- MB, GB, or TB (powers of 10)

The following example shows the partition table for the /dev/sda device in sectors:

```bash
parted /dev/sda unit s print
```
You can specify multiple subcommands on the same line, such as the unit and print subcommands in the previous example.

## Write the Partition Table on a New Disk

To partition a new drive, first write a disk label. The disk label indicates which partitioning scheme to use.

Use the `parted` command to write an MBR disk label:

```bash
parted /dev/sdb mklabel msdos
```

Use the `parted` command to write a GPT disk label:

```bash
parted /dev/sdb mklabel gpt
```

<div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Warning:</b><br><br>
The mklabel subcommand wipes the existing partition table. Use the mklabel subcommand to reuse the disk without regard to the existing data. If a new label moves the partition boundaries, then all data in existing file systems becomes inaccessible.<br><br>
</div>

## Create MBR Partitions

The following instructions create an MBR disk partition. Specify the disk device to create the partition on.

To start an interactive session, run the parted command as the root user and specify the disk device name as an argument:

```bash
parted /dev/sdb
```

Use the `mkpart` subcommand to create a partition. The help mkpart subcommand displays the syntax and available options for each argument:

```bash
help mkpart
```
```bash
 mkpart PART-TYPE [FS-TYPE] START END     make a partition

        PART-TYPE is one of: primary, logical, extended
        FS-TYPE is one of: udf, btrfs, nilfs2, ext4, ext3, ext2, f2fs, fat32, fat16,
        hfsx, hfs+, hfs, jfs, swsusp, linux-swap(v1), linux-swap(v0), ntfs, reiserfs,
        hp-ufs, sun-ufs, xfs, apfs2, apfs1, asfs, amufs5, amufs4, amufs3, amufs2,
        amufs1, amufs0, amufs, affs7, affs6, affs5, affs4, affs3, affs2, affs1, affs0,
        linux-swap, linux-swap(new), linux-swap(old)
        START and END are disk locations, such as 4GB or 10%.  Negative values count
        from the end of the disk.  For example, -1s specifies exactly the last sector.

        'mkpart' makes a partition without creating a new file system on the partition.
        FS-TYPE may be specified to set an appropriate partition ID.
```

Create a primary or extended partition.

```bash
(parted) mkpart
Partition type?  primary/extended? primary
```

<div style="border: 1px solid #aaa; border-radius: 6px; padding: 12px; background: #020202ff;">
<b>Note:</b><br><br>
If you require more than four partitions on an MBR-partitioned disk, then create three primary partitions and one extended partition. The extended partition serves as a container within which you can create multiple logical partitions.<br><br>
</div>

Next, you are prompted to enter the label for the file-system type. To list the supported file-system types, press Tab twice:

```bash
File system type?  [ext2]? Tab Tab
affs0  affs4  amufs  amufs3  apfs2  ext3  fat32  hp-ufs  linux-swap(old)  ntfs  udf
affs1  affs5  amufs0  amufs4  asfs  ext4  hfs  jfs  linux-swap(v0)  reiserfs  xfs
affs2  affs6  amufs1  amufs5  btrfs  f2fs  hfs+  linux-swap  linux-swap(v1)  sun-ufs
affs3  affs7  amufs2  apfs1   ext2   fat16  hfsx  linux-swap(new)  nilfs2  swsusp
```

Enter the file-system type to use on the partition, such as xfs or ext4. This value is only used as a partition type label, and does not create the file system.

```bash
File system type?  [ext2]? xfs
```

Specify the disk sector where the partition starts.

```bash
Start? 2048s
```

The `s` suffix provides the value in sectors, or you can use the MiB, GiB, TiB, MB, GB, or TB suffixes. The parted command defaults to the MB suffix. The parted command rounds provided values to satisfy disk constraints.

When the parted command starts, it retrieves the disk topology from the device, such as the disk's physical block size. The parted command ensures that the start position that you provide correctly aligns the partition with the disk structure, to optimize performance. If the start position results in a misaligned partition, then the parted command displays a warning. With most disks, a start sector that is a multiple of 2048 is safe.

Specify the disk sector where the partition ends. You can specify the end as a size or as an ending location. When you provide the end position, the parted command updates the partition table on the disk with the new partition details.


