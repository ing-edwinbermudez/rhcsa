# Manage Users and Groups, Permissions, and Processes

**Specifications**

You have moved into the next stage of the systemd administrator internship where you are asked to do some administrative tasks. In your new project, database users have access to a specific location to create, edit, and store database files. To allow these database users to manage files collaboratively, you must modify permissions so that all users have access to all files that are created in this location. The other restriction to consider is that only owners of the files can delete them.

Perform the following tasks on the serverb machine:

```bash
ssh student@serverb
```

- Identify and terminate the process that currently uses the most CPU time.

```bash
ps aux --sort=-%cpu | head -n 3
kill $(ps aux --sort=-%cpu | head -n 2 | awk '{print $2}' | tail -n 1)
```

- Create the `database` group with a group ID (GID) of `50000`.

```bash
cat /etc/group |grep -i 50000
sudo groupadd -g 50000 database
cat /etc/group |grep -i 50000
```
- Create the `dbadmin1` user and configure it with the following requirements:
    - Add the database group as a supplementary group.
    - Set the password to redhat and force a password change on first login.
    - Allow the password to be changed 10 days after the last password change.
    - Configure the password to expire 30 days after the last password change.
    - Allow the user to use Sudo to run any command as the superuser by creating its own sudoers file.
    - Configure the default umask as 027 for the dbadmin1 user.

```bash
sudo useradd dbadmin1 -G database -p redhat
sudo chage -l dbadmin1
sudo chage -d 0 -m 10 -M 30 dbadmin1 

sudo passwd dbadmin1
echo "dbadmin1 ALL=(ALL) ALL" > /etc/sudoers.d/dbadmin1

su - dbadmin1
echo "umask 027" >> ~/.bashrc
source ~/.bashrc
```

- Create the `/home/dbadmin1/grading/review2` directory and set all its contents to be owned by the `dbadmin1` user and the `database` group.

```bash
mkdir -p /home/dbadmin1/grading/review2
chown -R dbadmin1:database /home/dbadmin1
```
- Configure the `/home/dbadmin1/grading/review2` directory so that users are allowed to delete only files that they own. Configure the permissions on the directory to allow members of the `database` group to access the directory and to create contents in it. All other users must have `read` and `execute` permissions on the directory.

```bash
chmod o+t /home/dbadmin1/grading/review2
chmod g+rw /home/dbadmin1/grading/review2
chmod o+r /home/dbadmin1/grading/review2
```