# Redirecting Shell Input and Output

| **Number** | **Channel Name** | **Description**            | **Default Connection** | **Usage**            |
| ---------- | ---------------- | -------------------------- | ---------------------- | -------------------- |
| **0**      | `stdin`          | Standard input             | Keyboard               | Read only            |
| **1**      | `stdout`         | Standard output            | Terminal               | Write only           |
| **2**      | `stderr`         | Standard error             | Terminal               | Write only           |
| **3+**     | filename         | Other files (opened later) | None                   | Read, write, or both |

`0` (stdin): Input stream. When you type something in the terminal (e.g., for a program to read), it's read from this stream.

`1` (stdout): Output stream. When a program prints something (like with echo or printf), it goes to this descriptor — typically the screen.

`2` (stderr): Error stream. Used for error messages or diagnostics. Also goes to the screen, but kept separate from regular output for better logging or redirection.

`3+`: Whenever a program opens a file or network socket, the kernel assigns it a descriptor number starting from 3 (as 0–2 are reserved). These can be for:

- Files (read/write)
- Pipes
- Sockets
- Devices


To discard the output of a process, you can redirect to the empty `/dev/null` special file, which discards channel output that is redirected to it.

```bash
user@host:~$ find /etc > my-results.txt 2> errors.txt
```

Save process output to the /tmp/output file and error messages to the /tmp/errors file.

```bash
user@host:~$ find /etc -name passwd > /tmp/output 2> /tmp/errors
```

Save process output to the /tmp/output file and discard error messages.
```bash
user@host:~$ find /etc -name passwd > /tmp/output 2> /dev/null
```

Store output and errors together to the /tmp/all-message-output file.
```bash
user@host:~$ find /etc -name passwd &> /tmp/all-message-output
```

Append output and errors to the /tmp/all-message-output file.
```bash
user@host:~$ find /etc -name passwd >> /tmp/all-message-output 2>&1
```

## Constructing Pipelines

A pipeline is a sequence of one or more commands that are separated by the pipe character (`|`). A pipeline connects the standard output of the first command to the standard input of the next command.

Redirect the output of the ls command to the wc -l command, which counts the number of received lines from the ls command and prints that value to the terminal.
```bash
ls | wc -l
```
Redirect the output of the ls -t command to the head command to display the first 10 lines, with the final result redirected to the /tmp/first-ten-changed-files file.

```bash
ls -t | head -n 10 > /tmp/first-ten-changed-files
```

### Pipelines, Redirection, and Appending to a File

When you combine redirection with a pipeline, the shell sets up the entire pipeline first, and then it redirects the input/output. If you use output redirection in the middle of a pipeline, then the output goes to the file and not to the next command in the pipeline.

In the following example, the output of the ls command is redirected to the /tmp/saved-output file, and the less command displays nothing on the terminal.

```bash
ls > /tmp/saved-output | less
```

### tee command

The `tee` command in Linux is used to read from standard input (stdin) and write the output simultaneously to one or more files and to standard output (stdout). It's very useful when you want to view the output and save it at the same time.

The following example redirects the output of the ls command to the /tmp/saved-output file and passes it to the less command, so it is displayed on the terminal one screen at a time.

```bash
ls -l | tee /tmp/saved-output | less
```

If you use the tee command at the end of a pipeline, then the terminal shows the output of the commands in the pipeline and saves it to a file at the same time.
```bash
ls -t | head -n 10 | tee /tmp/ten-last-changed-files
```

Use the tee command -a option to append the content to a file instead of overwriting it

```bash
ls -l | tee -a /tmp/append-files
```

