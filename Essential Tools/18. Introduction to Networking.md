# Networking Concepts

## The TCP/IP Network Model

The TCP/IP network model is a four-layer set of communication protocols that describes how data communications are packetized, addressed, transmitted, routed, and received between computers over a network. The protocol is specified by RFC 1122: Requirements for Internet Hosts - Communication Layers.

The four layers of the TCP/IP network model are: application, transport, internet, and link.

### Application

Each application has specifications for communication so that clients and servers can communicate across platforms. Common protocols include SSH (remote access), HTTPS (secure web), FTP (file sharing), and SMTP (electronic mail delivery).

### Transport

Transmission Control Protocol (TCP) and User Datagram Protocol (UDP) are the fundamental protocols at the transport layer. TCP provides a reliable, connection-oriented communication method, ensuring data delivery and order. In contrast, UDP is a connectionless datagram protocol, offering faster but less reliable communication.

Application protocols, such as HTTP or DNS, use specific TCP or UDP ports to communicate. A comprehensive list of these well-known and registered ports can be found in the `/etc/services` file. When data is sent across a network, the combination of an IP address and a service port forms a socket. Every network packet includes both a source socket (identifying the sender) and a destination socket (identifying the receiver). Therefore, identifying network socket information is essential for effective traffic monitoring and filtering.

### Internet
The internet layer, also known as the network layer, is responsible for transmitting data packets from a source host to a destination host across interconnected networks. Key protocols at this layer include IPv4 and IPv6. Each host on a network has a unique IP address and a prefix, which together determine its network address (for example, 192.168.3.19/24). Routers play a crucial role at this layer by connecting different networks and forwarding traffic between them.

### Link

The link layer, or media access layer, provides the connection to physical media. The most common types of networks are wired Ethernet (802.3) and wireless Wi-Fi (802.11). Each physical device has a Media Access Control (MAC) address, which is also known as a hardware address, to identify the destination of packets on the local network segment.

Although TCP/IP is the standard for networking, the Open Systems Interconnection (OSI) model remains a popular teaching reference due to its more granular structure. This granularity is particularly useful for in-depth studies, such as differentiating protocol functionalities (for example, NFS) within TCP/IP's application layer. You might find references to "Layer 2" for Ethernet, "Layer 3" for IP, or "Layer 4" for TCP; these numbers directly correspond to layers in the OSI model.

The following diagram compares the seven-layer OSI model with the four-layer TCP/IP model

![alt text](images/image20.png)

## Network Interface Naming

Each network device in a system is identified and configured by using its unique name. In Red Hat Enterprise Linux 7 and later, the system generates consistent network interface names that persist across reboots. These names are not based on detection order, but instead on information from the firmware, the Peripheral Component Interconnect (PCI) bus topology, and the type of network device.

Network interface names start with the type of interface:

- Ethernet interface names begin with `en`.
- WLAN interface names begin with `wl`.
- WWAN interface names begin with `ww`.

The rest of the interface name is based on information from the server's firmware, or is determined by the location of the device in the PCI topology.

- `oN` indicates an onboard device with unique index N from the server's firmware. The eno1 name is onboard Ethernet device 1.
- `sN` indicates a device in PCI hotplug slot N. For example, ens3 is an Ethernet card in PCI hotplug slot 3.

- `pMsN` indicates a PCI device on bus M in slot N. For example, enp2s3.

A `wlp4s0` interface is a WLAN card on PCI bus 4 in slot 0.  If the card is a multifunction device (such as an Ethernet card with multiple ports, or a device with both Ethernet and another function), then you might see fN in the device name. An `enp0s1f0` interface is function 0 of the Ethernet card on bus 0 in slot 1. A second card interface would be named `enp0s1f1`, which is function 1 of that same device.

With persistent naming, you can be confident that your network interface names stay the same on a system, even after you add or remove hardware. The name of a device is generated based on unique hardware information, rather than reverting to the less predictable eth0 naming convention.

**Note**
Earlier versions of Red Hat Enterprise Linux used names such as eth0, eth1, and eth2 for each network interface. The eth0 interface name was the first network port detected, eth1 was the second interface, and so on. However, as devices were added and removed, the mechanism that named devices could change which interface was assigned to which name. Furthermore, the Peripheral Component Interconnect Express (PCIe) standard does not guarantee the order in which PCIe devices are detected on boot, which could change device naming unexpectedly due to variations during device or system startup.

## IPv4 Networking

System administrators must have a basic understanding of IPv4 networking to manage networking on servers. Although IPv6 has surpassed IPv4 usage in cellular networks, IPv4 remains the most common addressing scheme in enterprise networks.

### IPv4 Addresses

An IPv4 address is a 32-bit number, which is expressed as four 8-bit octets in a decimal format that ranges in value from 0 to 255, separated by single dots. The address is divided into two parts: the network prefix and the host identifier. The network prefix identifies a unique physical or virtual subnet. The host identifier represents a specific host on the subnet. All hosts on the same subnet have the same network prefix and can communicate to each other directly without a router. A network gateway connects different networks, and a network router commonly operates as the gateway for a subnet.

**Note**
An IP network is often divided into multiple, smaller network segments. Generally, segment refers to the physical or virtual link layer, whereas subnet refers to the logical IP addressing scheme applied to that segment. Subnetting is a technique to subdivide a large network allocation into smaller segments.

A network mask (`netmask`) is a binary mask whose length indicates how many bits belong to the network prefix that identifies the subnet. Because an IPv4 address is always 32 bits long, a subnet with a longer network mask has fewer available bits to identify hosts, which means fewer possible hosts. A subnet with a shorter network mask has more available bits to identify hosts, which means more possible hosts in the subnet.

Network masks are expressed in one of two forms, which are both used routinely. The first form, CIDR notation, appends a forward slash (/) and an integer up to 32 that indicates the number of bits in the binary mask. The second notation displays the number of bits in the binary mask as four 8-bit octets in decimal format.

## IPv4 Subnets

The number of available host addresses in a subnet depends on the network prefix size. For example, a network prefix of /24 leaves 8 bits, or 255 possible host addresses in the subnet. A network prefix of /16 leaves 16 bits, or 65536 possible host addresses in the subnet.

- The network address for a subnet is the lowest possible address on a subnet, where the host identifier is all binary zeros.
- The broadcast address for a subnet is the highest possible address on a subnet, where the host identifier is all binary ones, and is a special address for broadcasting packets to all subnet hosts.
- The gateway address for a subnet can be any unique host identifier in the subnet, but is commonly set to the first available host address. This gateway numbering convention is not mandatory, and subnets that do not need external communication do not set a network gateway.

The following figures illustrate how to use a netmask to determine the network and host portions of an IP address. A bitwise AND operation is performed for each binary bit in the IP address and the corresponding netmask. If both bits in the compared position are 1, the result is 1; otherwise the result is 0.

![alt text](images/image21.png)

![alt text](images/image22.png)

