# Controlling Services and Daemons

## The systemd Daemon

The `systemd` daemon manages the startup process for Linux, which includes starting services and managing services in general. The `systemd` daemon activates system resources, server daemons, and other processes, both at boot time and on a running system.

Daemons are processes that either wait or run in the background to perform various tasks. By convention, daemon names end with `d`, such as httpd, vsftpd, chronyd, and so on. In the context of systemd, a service often refers to one or more daemons.

Generally, daemons start automatically at boot time and continue to run until the system shuts down or until you manually stop them. However, starting or stopping a service might instead change the state of the system once, without leaving a running daemon process afterward (a oneshot service type).

In Red Hat Enterprise Linux, the first process that starts (PID 1) is the systemd daemon, which provides these features:
- Parallelization capabilities (starting multiple services simultaneously), which increase the boot speed of a system.
- On-demand starting of daemons without requiring a separate service.
- Automatic service dependency management, which can prevent long timeouts. For example, a network-dependent service does not try to start until the network is available.
- A method of tracking related processes together by using Linux control groups.

## Service Units Description

A systemd unit defines objects that the system knows how to manage.

Units are represented by configuration files named unit files, which encapsulate information about system services, listening sockets, and other relevant objects for the systemd init system.

A unit has a name and a unit type. The name provides a unique identity to the unit. The unit type enables grouping units together with other similar unit types.

The systemd daemon uses units to manage different types of objects:

**Service units**
Service units have a `.service` extension and represent system services. You can use service units to start frequently used daemons, such as a web server.

**Socket units**
Socket units have a `.socket` extension and represent interprocess communication (IPC) sockets that systemd should monitor. If a client connects to the socket, then the systemd manager start/s a daemon and passes the connection to it. You can use socket units to delay the start of a service at boot time and to start on demand the services that are used less often.

**Path units**
Path units have a `.path` extension and delay the activation of a service until a specific file-system change occurs. You can use path units for services that use spool directories, such as a printing system.

To manage units, use the `systemctl` command. For example, display available unit types with the `systemctl -t` help command. The `systemctl` command can take abbreviated unit names, process tree entries, and unit descriptions.

## Listing Service Units

Use the `systemctl` command to explore the system's current state. For example, the following command lists and paginates all currently loaded service units.

```bash
systemctl list-units --type=service
```

```bash
  UNIT                       LOAD   ACTIVE SUB          DESCRIPTION
  accounts-daemon.service    loaded active running      Accounts Service
  atd.service                loaded active running      Deferred execution ...
  auditd.service             loaded active running      Security Audit ...
  avahi-daemon.service       loaded active running      Avahi mDNS/DNS-SD Stack
  chronyd.service            loaded active running      NTP client/server
...output omitted...
```

In this example, the `--type=service` option limits the type of systemd units to service units. The output has the following columns:

- UNIT : The service unit name.
- LOAD : Whether the systemd daemon correctly parsed the unit's configuration and loaded the unit into memory.
- ACTIVE : The high-level activation state of the unit. This information indicates whether the unit started successfully.
- SUB : The low-level activation state of the unit. This information indicates more detailed information about the unit. The information varies based on unit type, state, and how the unit is executed.
- DESCRIPTION : The short description of the unit.

By default, the `systemctl list-units --type=service` command lists only the service units with active activation states. The `systemctl list-units --all` option lists all service units regardless of the activation states. Use the `--state=` option to filter by the values in the LOAD, ACTIVE, or SUB fields.

```bash
systemctl list-units --type=service --all
```

The `systemctl` command without any arguments lists units that are both loaded and active.

```bash
systemctl
```

The `systemctl` command `list-units` option displays units that the systemd service attempts to parse and load into memory. This option does not display services that are installed but not enabled. You can use the `systemctl` command `list-unit-files` option to see the state of all the installed unit files:

```bash
systemctl list-unit-files --type=service
```

In the output of the `systemctl list-unit-files` command, some common entries for the STATE field are enabled, `disabled`, `static`, and `masked`. All STATE values are listed in the systemctl command manual pages.

## Viewing Service States

View a unit's status with the `systemctl status name.type` command. If the unit type is omitted, then the command expects a service unit with that name.

```bash
systemctl status sshd.service
```

```bash
● sshd.service - OpenSSH server daemon
     Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; preset: enabled)
     Active: active (running) since Thu 2025-05-22 14:47:33 UTC; 2h 48min ago
 Invocation: 215ee4e3b9e2426880cb727cb3933db1
       Docs: man:sshd(8)
             man:sshd_config(5)
   Main PID: 2212 (sshd)
      Tasks: 1 (limit: 35724)
     Memory: 3.2M (peak: 6.4M)
        CPU: 8.984s
     CGroup: /system.slice/sshd.service
             └─2212 "sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups"

May 22 17:33:34 workstation sshd-session[5124]: Connection closed by ...
May 22 17:33:46 workstation sshd-session[5125]: Connection closed by ...
May 22 17:33:59 workstation sshd-session[5126]: Connection closed by ...
...output omitted...
```

The following table lists some output fields from the `systemctl` command status option:

**Service Unit Information**

| Field     | Description |
| --------- | ----------- |
| Loaded    | Whether the service unit is loaded into memory. |
| Active    | Whether the service unit is running, and if so, for how long. |
| Docs      | Where to find more information about the service. |
| Main PID  | The main process ID of the service, including the command name. |
| Status    | More information about the service. |
| Process   | More information about related processes. |
| CGroup    | More information about related control groups. |

Not all these fields are always present in the command output.

Keywords in the status output indicate the state of the service. The following table defines keywords for service states.



**Service States in `systemctl` Output**

| Keyword            | Description |
| ------------------ | ----------- |
| loaded             | The unit configuration file is processed. |
| active (running)   | The service is running with continuing processes. |
| active (exited)    | The service successfully completed a one-time configuration. |
| active (waiting)   | The service is running but is waiting for an event. |
| inactive           | The service is not running. |
| enabled            | The service starts at boot time. |
| disabled           | The service is not set to start at boot time. |
| static             | The service cannot be enabled, but an enabled unit might start it automatically. |


## Verifying Service Status

The `systemctl` command verifies the specific states of a service. For example, use the `systemctl` command `is-active` option to verify whether a service unit is active (running):

```bash
systemctl is-active sshd.service
```
The command returns the service unit state, which is usually `active` or `inactive`.

Run the `systemctl` command `is-enabled` option to verify whether a service unit is enabled to start automatically during system boot:

```bash
systemctl is-enabled sshd.service
```

The command returns whether the service unit is enabled to start at boot time, and the state is usually `enabled` or `disabled`.

To verify whether the unit failed during startup, run the `systemctl` command `is-failed` option:

```bash
systemctl is-failed sshd.service
```

The command returns `active` if the service is correctly `running`, or `failed` if an error occurred during startup. If the unit was stopped, then it returns `unknown` or `inactive`.

To list all the failed units, run the `systemctl --failed --type=service` command.