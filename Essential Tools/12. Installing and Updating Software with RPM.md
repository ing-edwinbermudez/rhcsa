# Installing and Updating Software with RPM

## RPM Software Packages

The RPM Package Manager, which Red Hat originally developed, provides a standard way to package software for distribution. Managing software in the form of RPM packages is simpler than working with software that is extracted to a file system from an archive. With RPM packages, administrators can track which files the software package installs, which files the software package removes if you uninstall it, and it verifies that supporting packages are present when you install it. The local RPM database on your system stores the information about installed packages. Red Hat provides all software for Red Hat Enterprise Linux as an RPM package.

RPM package file names consist of four elements (plus the .rpm suffix): name-version-release.architecture:

![alt text](images/image17.png)

- `Name` is one or more words to describe the contents (coreutils).
- `Version` is the version number of the original software (9.5).
- `Release` is the release number of the package based on that version, and is set by the packager, who might not be the original software developer (6.el10).
- `Arch` is the processor architecture that the package is compiled to run on. The x86_64 value indicates that this package is built for the 64-bit version of the x86 instruction set (as opposed to aarch64 for 64-bit ARM, and so on).

RPM packages are often downloaded from repositories. A repository is a central location for storing and maintaining RPM software packages.

You require only the package name to install RPM packages from repositories.

- If multiple versions exist, then the RPM Package Manager installs the package with the later version number.
- If multiple releases of a single version exist, then the RPM Package Manager installs the package with the later release number.

Each RPM package is an archive with the following components:

- The files that the package installs in your system.
- Information about the package (metadata), such as the name, version, release, and architecture; a summary and description of the package; whether it requires other packages to be installed; licensing; a package change log; and other details.
- Scripts that might run when you install, update, or remove the package. These scripts might also run when you install, update, or remove other packages.

Typically, software providers digitally sign RPM packages with GNU Privacy Guard (GPG) keys. Red Hat, for example, digitally signs all packages that it releases. The RPM system verifies package integrity by confirming that the package is signed with the appropriate GPG key. The RPM system fails to install a package if the GPG signature does not match.

## Updating Software with RPM Packages

Red Hat generates a complete RPM package to update software. An administrator who installs that package gets only the most recent version of the package. You do not need to install an earlier version of a package to patch it. To update software, RPM removes the earlier version of the package and installs the latest version. Updates usually retain configuration files, but the packager of the new version defines the exact behavior.

Typically, only one version of a package is installed at a time. If a package is built with nonconflicting file names, then you might install multiple versions. The kernel package is a an example of installing multiple package versions. Because you test a new kernel only by booting to that kernel, the package is designed to support installing multiple versions. If the new kernel fails to boot, then you can revert to the previous kernel.

## Inspecting RPM Packages

The `rpm` utility is a low-level tool that can retrieve information about the contents of package files and installed packages. By default, the tool gets information from a local database of installed packages. Use the rpm command `-p` option to get information about a downloaded but uninstalled package file. Use this option to inspect the package contents before installing.

Retrieve general information about installed packages:

- `rpm -qa` : List all installed packages.
- `rpm -qf FILENAME` : Determine which package provides FILENAME.

```bash
rpm -qf /etc/yum.repos.d
```

Get information about specific packages:
- `rpm -q` : List the currently installed package version.

```bash
rpm -q dnf
```
- `rpm -qi` : Get detailed package information.
- `rpm -ql` : List the files that the package installs.

```bash
rpm -ql dnf
```

- `rpm -qc` : List only the configuration files that the package installs.
```bash
rpm -qd openssh-clients
```

- `rpm -q --scripts` : List the shell scripts that run before or after you install or remove the package.

```bash
rpm -q --scripts openssh-server
```

- `rpm -q --changelog` : List the change log information for the package.

```bash
rpm -q --changelog audit
```

Query local package files:

-  `rpm -qlp` : List the files that the local package installs.

```bash
ls -l podman-5.4.0-1.el10.x86_64.rpm
rpm -qlp podman-5.4.0-1.el10.x86_64.rpm
```

## Installing RPM Packages

Use the rpm command to install an RPM package that you downloaded to your local directory.

```bash
rpm -ivh podman-5.4.0-1.el10.x86_64.rpm
```
## Extracting RPM Packages

Use the `rpm2cpio` command to extract files from an RPM package file without installing the package.

The `rpm2cpio` command converts an RPM package to a cpio archive. After the RPM package is converted to a `cpio` archive, the `cpio` command can extract a list of files.

Use the cpio command with the `-i` option to extract files from standard input. Use the `-d` option to create subdirectories as needed, starting in the current working directory. Use the `-v` option for verbose output.

```bash
rpm2cpio httpd-2.4.63-1.el10.x86_64.rpm | cpio -idv
ls -l
```

Extract individual files by specifying the path of the file:

```bash
rpm2cpio httpd-2.4.63-1.el10.x86_64.rpm | \
cpio -id "/etc/httpd/conf.modules.d/00-systemd.conf"

ls etc/httpd/conf.modules.d/
```

Use the `rpm2cpio` and `cpio -t` commands to list the files in an RPM package. Use the `-v`option of the cpio command for verbose output.

```bash
rpm2cpio httpd-2.4.63-1.el10.x86_64.rpm | cpio -tv
```
