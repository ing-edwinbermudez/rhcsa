## Inodes

**ğŸ“¦ What Is an Inode?**
- An inode (index node) is a data structure used by Unix/Linux file systems to store metadata about a file or directory, but not the file name or content

- Each file or directory on the system has a unique inode number.

**ğŸ“‹ What Information Does an Inode Store?**

| Metadata                | Description                                      |
| ----------------------- | ------------------------------------------------ |
| File type               | Regular file, directory, symbolic link, etc.     |
| Permissions (mode)      | Read/write/execute flags for user, group, others |
| Owner (UID)             | User ID who owns the file                        |
| Group (GID)             | Group ID associated with the file                |
| File size               | In bytes                                         |
| Timestamps              | Last access, modification, and inode change      |
| Link count              | Number of hard links to the file                 |
| Pointers to data blocks | Physical location of file data on disk           |


ğŸ” View Inodes with `ls` and `stat`

See inode number of files:
```bash
ls -i
```

Detailed file info including inode:
```bash
stat file.txt
```

![alt text](images/image4.png)

## Hard Links

#### **ğŸ”— What Is a Hard Link?**
A hard link is another name (alias) for an existing file. It points directly to the same inode, meaning both the original file and the hard link share the same data on disk.

#### **ğŸ“¦ Key Properties of Hard Links**

| Feature                        | Description                                                               |
| ------------------------------ | ------------------------------------------------------------------------- |
| Shared inode                   | Both the original file and hard link point to the **same inode**.         |
| Shared data                    | They reference the **same content** on disk.                              |
| Independent filenames          | You can delete one; the other still works (unless all links are removed). |
| Only works on same filesystem  | You **cannot hard link across partitions or mounts**.                     |
| Not for directories (normally) | Most systems **disallow hard links to directories** to avoid loops.       |

#### **ğŸ”§ Create a Hard Link**

```bash
ln original.txt copy.txt
```

- Both share the same inode.

- Modifying one modifies both.

- Deleting one does not remove the file content â€” the inode remains as long as at least one hard link exists.

Verify with `ls -i`
```bash
ls -i original.txt copy.txt
```
Youâ€™ll see the same inode number for both:

![alt text](images/image5.png)

## âŒ Deleting a Hard Link
```bash
rm original.txt
```
- This removes the filename, but the actual file still exists because `copy.txt` still points to the inode.

- Only when all hard links are deleted does the data get removed.

![alt text](images/image6.png)

### âš ï¸ Hard Link: Limitations and Considerations

#### âŒ 1. Cannot Link Across Filesystems

**Limitation:** Hard links must reside on the same filesystem (partition or disk).

**Why?** A hard link points directly to an **inode number**, and inodes are unique only within a filesystem.

âœ… **Alternative:** Use a **symbolic link** (`ln -s`) if cross-filesystem linking is needed.

---

##### ğŸš« 2. Cannot Link Directories (Usually)

**Limitation:** Most systems prevent hard links to directories.

**Why?** To avoid creating **cyclical directory structures** that can:

- Confuse tools like `find`, `du`, or `rsync`
- Cause infinite loops
- Corrupt the filesystem

ğŸ”’ **Note:** Only the root user can force this under specific conditions (e.g., via low-level tools), but it's **strongly discouraged**.

---

##### ğŸ§¹ 3. Difficult File Management

**Consideration:** When multiple hard links point to the same file, it becomes harder to:

- Track file ownership
- Know which name was the "original"
- Avoid accidental deletion or modification

ğŸ“ **Example:**  
If you create:

```bash
ln fileA fileB
```

## Soft Links

### **ğŸ§· What is a Soft Link (Symbolic Link)?**
A soft link is a pointer to another file or directory â€” similar to a shortcut in Windows.

It does not share the inode of the original file, but instead stores the path to it.

### **ğŸ”— Key Characteristics**
| Feature                 | Description                                                      |
| ----------------------- | ---------------------------------------------------------------- |
| Points to path          | Stores a reference to the **filename/path**, not the data itself |
| Different inode         | Has a **different inode** than the target                        |
| Cross-filesystem        | âœ… Can link across filesystems or partitions                      |
| Broken links possible   | âŒ Breaks if the target is moved or deleted                       |
| Can link to directories | âœ… Can point to directories (unlike hard links)                   |


#### ğŸ”§ Create a Soft Link

```bash
ln -s target linkname
```

Creates a symbolic link index-link.html in your home directory, pointing to the original file in /var/www/html.

```bash
ln -s /var/www/html/index.html ~/index-link.html
```


ğŸ” Check a Symlink
```bash
ls -l index-link.html
```

example 

```bash
cat <<EOF > index.html
<!DOCTYPE html>
<html>
  <head>
    <title>Â¡Este es el tÃ­tulo de la pÃ¡gina web!</title>
  </head>
  <body>
    Este es un pÃ¡rrafo de ejemplo. Todo lo que estÃ© en la etiqueta <strong>body</strong> aparecerÃ¡ en la pÃ¡gina, al igual que esta etiqueta <strong>p</strong> y su contenido.
  </body>
</html>
EOF
```

```bash
ls -s index.html /tmp/
```
![alt text](images/image7.png)


### **ğŸ†š Hard Link vs Soft Link**

| Feature                    | Hard Link    | Soft (Symbolic) Link |
| -------------------------- | ------------ | -------------------- |
| Shares inode               | âœ… Yes        | âŒ No                 |
| Breaks if original removed | âŒ No         | âœ… Yes                |
| Cross-filesystem           | âŒ No         | âœ… Yes                |
| Points to                  | Data/inode   | File path            |
| Can link directories       | âŒ Usually no | âœ… Yes                |
| Created with               | `ln`         | `ln -s`              |
